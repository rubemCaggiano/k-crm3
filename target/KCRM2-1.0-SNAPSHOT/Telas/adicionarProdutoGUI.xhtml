<?xml version="1.0" encoding="UTF-8"?>

<html xmlns="http://www.w3.org/1999/xhtml" 
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:b="http://bootsfaces.net/ui"
      xmlns:ui="http://java.sun.com/jsf/facelets">

    <ui:composition template="/Template/template.xhtml">
        <ui:define name="content">
                <b:formGroup>
                    <b:panel id="pProd" title="Cadastro de Produto">
                        <b:button look="primary" onclick="$('.mCadProd').modal()" value="Novo Produto" icon-awesome="plus"/>

                        <b:modal id="mExcluirProd"
                                 title="Deseja Excluir?" 
                                 styleClass="mExcluirProd"
                                 closable="false"  
                                 close-on-escape="false" 
                                 backdrop="false"
                                 closeOnEscape="false">
                            <b:panel id="pMExcluirProd">
                                <b:form>
                                    <b:commandButton look="success" value="Confirmar" action="#{produtoMB.excluirProduto()}" iconAwesome="fa-check" span="3" />
                                    <b:button value="Cancelar" look="danger" dismiss="modal"  />
                                </b:form>
                            </b:panel>
                        </b:modal>





                        <b:modal id="mCadProd"
                                 title="Cadastro de Produtos" 
                                 styleClass="mCadProd"
                                 closable="false"  
                                 close-on-escape="false" 
                                 backdrop="false"
                                 closeOnEscape="false">
                            <b:panel id="pMCadProd">
                                <b:form>
                                    <b:row>
                                        <b:selectOneMenu id="statusCad"
                                                         value="#{produtoMB.status}" 
                                                         required="true"
                                                         label="Status"
                                                         span="3"
                                                         select2="true"
                                                         converter="omnifaces.SelectItemsConverter"
                                                         >
                                            <f:selectItem itemLabel="Selecione um Status" />
                                            <f:selectItems value="#{produtoMB.statusPossiveis}"
                                                           var="status" 
                                                           itemLabel="#{status.status}"
                                                           itemValue="#{status}"
                                                           />
                                        </b:selectOneMenu>
                                    </b:row>
                                    <b:row>
                                        <b:inputText span="12" id="descricao" value="#{produtoMB.produto.descricao}" label="Descrição" size="200" required="true" />

                                    </b:row>
                                    <b:row>
                                        <b:inputText span="4" id="referencia" value="#{produtoMB.produto.referencia}" label="Referência" size="30" required="true" />
                                        <b:inputText span="4" id="numeroca" value="#{produtoMB.produto.numeroCa}" label="Numero do C.A " mask="99.999" size="30" required="false"  />
                                    </b:row>
                                    <b:row> 
                                        <b:inputText span="3" id="custo" value="#{produtoMB.produto.custo}" label="Custo de Produção " size="10" required="true" mask="numeric" />
                                        <b:inputText span="3" id="mcminima" value="#{produtoMB.produto.mcMinima}" label="Margem Minima" size="10" required="false" mask="numeric" />
                                    </b:row>
                                    <b:row>
                                        <b:selectOneMenu id="familia"
                                                         value="#{produtoMB.familia}" 
                                                         required="true"
                                                         label="Familia"
                                                         span="3"
                                                         select2="true"
                                                         converter="omnifaces.SelectItemsConverter"
                                                         >
                                            <f:converter converterId="familiaConverter"/>
                                            <f:selectItem itemLabel="Selecione uma Familia" />
                                            <f:selectItems value="#{produtoMB.familias}"
                                                           var="familia" 
                                                           itemLabel="#{familia.nome}"
                                                           itemValue="#{familia}"
                                                           />
                                        </b:selectOneMenu>
                                    </b:row>
                                    <b:row>  

                                        <b:selectOneMenu id="linha"
                                                         value="#{produtoMB.linha}" 
                                                         required="true"
                                                         label="Linha"
                                                         span="3"
                                                         select2="true"
                                                         converter="omnifaces.SelectItemsConverter"
                                                         >
                                            <f:selectItem itemLabel="Selecione uma Linha" />
                                            <f:selectItems value="#{produtoMB.linhas}"
                                                           var="linha" 
                                                           itemLabel="#{linha.nome}"
                                                           itemValue="#{linha}"
                                                           />
                                        </b:selectOneMenu>
                                    </b:row>  
                                    <b:row> 
                                        <b:selectOneMenu id="grupo"
                                                         value="#{produtoMB.grupo}" 
                                                         required="true"
                                                         label="Grupo"
                                                         span="3"
                                                         select2="true"
                                                         converter="omnifaces.SelectItemsConverter"
                                                         >
                                            <f:selectItem itemLabel="Selecione um Grupo" />
                                            <f:selectItems value="#{produtoMB.grupos}"
                                                           var="grupo" 
                                                           itemLabel="#{grupo.nome}"
                                                           itemValue="#{grupo}"
                                                           />
                                        </b:selectOneMenu>
                                    </b:row>
                                    <b:row>
                                        <b:message for="descricao" />
                                        <b:message for="referencia" />
                                        <b:message for="numeroca" />
                                        <b:message for="custo" />
                                        <b:message for="mcminima" />
                                        <b:message for="familia" />
                                        <b:message for="linha" />
                                        <b:message for="grupo" />

                                    </b:row>

                                    <b:commandButton look="primary" value="Salvar" action="#{produtoMB.salvarProduto()}" icon-awesome="save">
                                    </b:commandButton>
                                </b:form>
                            </b:panel>

                            <f:facet name="footer">
                                <b:button value="Close" look="danger" dismiss="modal"  />
                            </f:facet>	

                        </b:modal>

                        <b:modal id="mDtProd"
                                 title="Cadastro de Produtos" 
                                 styleClass="mDtProd"
                                 closable="false"  
                                 close-on-escape="false" 
                                 backdrop="false"
                                 closeOnEscape="false">
                            <b:panel id="pMDtProd">
                                <b:form>
                                    <b:row>
                                        <b:inputText readonly="true" span="12" id="status" value="#{produtoMB.produto.status.status}" label="Status" size="200" required="true" />
                                    </b:row>
                                    <b:row>
                                        <b:inputText readonly="true" span="12" id="descricao" value="#{produtoMB.produto.descricao}" label="Descrição" size="200" required="true" />
                                    </b:row>
                                    <b:row>
                                        <b:inputText readonly="true" span="4" id="referencia" value="#{produtoMB.produto.referencia}" label="Referência" size="30" required="true" />
                                        <b:inputText readonly="true" span="4" id="numeroca" value="#{produtoMB.produto.numeroCa}" label="Numero do C.A " size="30" required="false" />
                                    </b:row>
                                    <b:row> 
                                        <b:inputText readonly="true" span="3" id="custo" value="#{produtoMB.produto.custo}" label="Custo de Produção" size="10" required="true" />
                                        <b:inputText readonly="true" span="3" id="mcminima" value="#{produtoMB.produto.mcMinima}" label="Margem Minima" size="10" required="false" mask="numeric" />
                                    </b:row>
                                    <b:row>
                                        <b:inputText readonly="true" span="3" id="pfamiliaN" value="#{produtoMB.produto.familia.nome}" label="Familia" size="10" required="true" />
                                        <b:inputText readonly="true" span="3" id="plinhaN" value="#{produtoMB.produto.linha.nome}" label="Linha" size="10" required="true" />
                                        <b:inputText readonly="true" span="3" id="pgrupoN" value="#{produtoMB.produto.grupo.nome}" label="Grupo" size="10" required="true" />
                                    </b:row>
                                </b:form>
                            </b:panel>

                            <f:facet name="footer">
                                <b:button value="Close" look="danger" dismiss="modal"  />
                            </f:facet>	

                        </b:modal>


                        <h:form>
                            <b:dataTable   
                                excel="true"
                                columnVisibility="true"
                                print="true"
                                value="#{produtoMB.produtos}"
                                var="produto"
                                select="true"
                                selectionMode="single"
                                customLangUrl="//cdn.datatables.net/plug-ins/1.10.12/i18n/Portuguese-Brasil.json"
                                >
                                <b:dataTableColumn value="#{produto.status.status}" label="Status" />
                                <b:dataTableColumn value="#{produto.referencia}" label="Referencia" />
                                <b:dataTableColumn value="#{produto.descricao}" label="Descrição" />
                                <b:dataTableColumn value="#{produto.numeroCa}" label="Numero C.A" />
                                <b:dataTableColumn value="#{produto.familia.nome}" label="Familia" />
                                <b:dataTableColumn value="#{produto.grupo.nome}" label="Grupo" />
                                <b:dataTableColumn value="#{produto.linha.nome}" label="Linha" />

                                <b:dataTableColumn label="Ações">
                                    <b:commandButton type="button" look="info" onclick="$('.mDtProd').modal()" action="#{produtoMB.detalharProduto(produto)}" immediate="true" icon-awesome="search-plus">
                                        <f:ajax event="click" render="pMDtProd"/>
                                    </b:commandButton>
                                    <b:commandButton type="button" look="warning" onclick="$('.mCadProd').modal()" action="#{produtoMB.detalharProduto(produto)}" icon="edit" >
                                        <f:ajax event="click" render="pMCadProd"/>
                                    </b:commandButton>

                                    <b:commandButton type="button" look="danger" onclick="$('.mExcluirProd').modal()" action="#{produtoMB.carregarProduto(produto)}" icon="trash" >
                                    </b:commandButton>
                                </b:dataTableColumn>


                            </b:dataTable>
                        </h:form>
                    </b:panel>


                    <b:panel id="pFamilia" title="Cadastro de Familia" collapsed="true">
                        <b:button look="primary" onclick="$('.mCadFamilia').modal()" value="Nova Familia" icon-awesome="plus"/>
                        <b:modal id="mCadFamilia"
                                 title="Cadastro de Familia de Produtos" 
                                 styleClass="mCadFamilia"
                                 closable="false"  
                                 close-on-escape="false" 
                                 backdrop="false">
                            <b:panel id="pMCadFamilia">
                                <h:form>
                                    <b:row>
                                        <b:inputText span="12" id="descricaoFamilia" value="#{produtoMB.familia.descricao}" label="Descrição" size="200" required="true" />
                                    </b:row>
                                    <b:row>
                                        <b:inputText span="12" id="nomeFamilia" value="#{produtoMB.familia.nome}" label="Nome" size="200" required="true" />
                                    </b:row>
                                    <b:row>
                                        <b:inputText span="12" id="nomeRedFamilia" value="#{produtoMB.familia.nomeReduzido}" label="Nome Reduzido" size="200" required="true" />
                                    </b:row>
                                    <b:row>
                                        <b:message for="descricaoFamilia"/>
                                        <b:message for="nomeFamilia"/>
                                        <b:message for="nomeRedFamilia"/>
                                    </b:row>
                                    <b:commandButton look="primary" value="Salvar" action="#{produtoMB.salvarFamilia()}"  icon-awesome="save">
                                    </b:commandButton>
                                </h:form>
                            </b:panel>
                            <f:facet name="footer">
                                <b:button value="Close" look="danger" dismiss="modal" />
                            </f:facet>
                        </b:modal>

                        <b:modal id="mDtFamilia"
                                 title="Cadastro de Familia de Produtos" 
                                 styleClass="mDtFamilia"
                                 closable="false"  
                                 close-on-escape="false" 
                                 backdrop="false">
                            <b:panel id="pMDtFamilia">
                                <h:form>
                                    <b:row>
                                        <b:inputText readonly="true" span="12" id="descricaoFamilia" value="#{produtoMB.familia.descricao}" label="Descrição" size="200" required="true" />
                                    </b:row>
                                    <b:row>
                                        <b:inputText readonly="true" span="12" id="nomeFamilia" value="#{produtoMB.familia.nome}" label="Nome" size="200" required="true" />
                                    </b:row>
                                    <b:row>
                                        <b:inputText readonly="true" span="12" id="nomeRedFamilia" value="#{produtoMB.familia.nomeReduzido}" label="Nome Reduzido" size="200" required="true" />
                                    </b:row>

                                </h:form>
                            </b:panel>
                            <f:facet name="footer">
                                <b:button value="Close" look="danger" dismiss="modal" />
                            </f:facet>
                        </b:modal>

                        <h:form>
                            <b:dataTable  excel="true"
                                          columnVisibility="true"
                                          print="true"
                                          value="#{produtoMB.familias}"
                                          var="familia"
                                          select="true"
                                          selectionMode="single"
                                          customLangUrl="//cdn.datatables.net/plug-ins/1.10.12/i18n/Portuguese-Brasil.json"
                                          >

                                <b:dataTableColumn value="#{familia.nome}" label="Familia" />
                                <b:dataTableColumn value="#{familia.descricao}" label="Descrição" />
                                <b:dataTableColumn value="#{familia.nomeReduzido}" label="Nome Reduzido" />

                                <b:dataTableColumn label="Ações">
                                    <b:commandButton type="button" onclick="$('.mDtFamilia').modal()" look="info" action="#{produtoMB.detalharFamilia(familia)}" immediate="true" icon-awesome="search-plus">
                                        <f:ajax event="click" render="pMDtFamilia"/>
                                    </b:commandButton>
                                    <b:commandButton type="button" onclick="$('.mCadFamilia').modal()" look="warning" action="#{produtoMB.alterarFamilia(familia)}" immediate="true" icon="edit" >
                                        <f:ajax event="click" render="pMCadFamilia"/>
                                    </b:commandButton>
                                    <b:commandButton type="submit" look="danger" action="#{produtoMB.excluirFamilia(familia)}" icon="trash" />
                                </b:dataTableColumn>


                            </b:dataTable>
                        </h:form>
                    </b:panel>


                    <b:panel id="pLinha" title="Cadastro de Linha" collapsed="true">
                        <b:button look="primary" onclick="$('.mCadLinha').modal()" value="Nova Linha" icon-awesome="plus"/>
                        <b:modal id="mCadLinha"
                                 title="Cadastro de Linha de Produtos" 
                                 styleClass="mCadLinha"
                                 closable="false"  
                                 close-on-escape="false" 
                                 backdrop="false">
                            <b:panel id="pMCadLinha">
                                <h:form>
                                    <b:row>
                                        <b:inputText span="12" id="descricaoLinha" value="#{produtoMB.linha.descricao}" label="Descrição" size="200" required="true" />
                                    </b:row>
                                    <b:row>
                                        <b:inputText span="12" id="nomeLinha" value="#{produtoMB.linha.nome}" label="Nome" size="200" required="true" />
                                    </b:row>
                                    <b:row>
                                        <b:inputText span="12" id="nomeRedLinha" value="#{produtoMB.linha.nomeReduzido}" label="Nome Reduzido" size="200" required="true" />
                                    </b:row>
                                    <b:row>
                                        <b:message for="descricaoLinha"/>
                                        <b:message for="nomeLinha"/>
                                        <b:message for="nomeRedLinha"/>
                                    </b:row>
                                    <b:commandButton look="primary" value="Salvar" action="#{produtoMB.salvarLinha()}"  icon-awesome="save">
                                    </b:commandButton>
                                </h:form>
                            </b:panel>
                            <f:facet name="footer">
                                <b:button value="Fechar" look="danger" dismiss="modal" />
                            </f:facet>
                        </b:modal>

                        <b:modal id="mDtLinha"
                                 title="Cadastro de Linha de Produtos" 
                                 styleClass="mDtLinha"
                                 closable="false"  
                                 close-on-escape="false" 
                                 backdrop="false">
                            <b:panel id="pMDtLinha">
                                <h:form>
                                    <b:row>
                                        <b:inputText readonly="true" span="12" id="descricaoLinha" value="#{produtoMB.linha.descricao}" label="Descrição" size="200" required="true" />
                                    </b:row>
                                    <b:row>
                                        <b:inputText readonly="true" span="12" id="nomeLinha" value="#{produtoMB.linha.nome}" label="Nome" size="200" required="true" />
                                    </b:row>
                                    <b:row>
                                        <b:inputText readonly="true" span="12" id="nomeRedLinha" value="#{produtoMB.linha.nomeReduzido}" label="Nome Reduzido" size="200" required="true" />
                                    </b:row>
                                </h:form>
                            </b:panel>
                            <f:facet name="footer">
                                <b:button value="Fechar" look="danger" dismiss="modal" />
                            </f:facet>
                        </b:modal>

                        <h:form>
                            <b:dataTable  excel="true"
                                          columnVisibility="true"
                                          print="true"
                                          value="#{produtoMB.linhas}"
                                          var="linha"
                                          select="true"
                                          selectionMode="single"
                                          customLangUrl="//cdn.datatables.net/plug-ins/1.10.12/i18n/Portuguese-Brasil.json"
                                          >

                                <b:dataTableColumn value="#{linha.nome}" label="Linha" />
                                <b:dataTableColumn value="#{linha.descricao}" label="Descrição" />
                                <b:dataTableColumn value="#{linha.nomeReduzido}" label="Nome Reduzido" />

                                <b:dataTableColumn label="Ver">
                                    <b:commandButton type="button" onclick="$('.mDtLinha').modal()" look="info" action="#{produtoMB.detalharLinha(linha)}" immediate="true" icon-awesome="search-plus">
                                        <f:ajax event="click" render="pMDtLinha"/>
                                    </b:commandButton>
                                    <b:commandButton type="button" onclick="$('.mCadLinha').modal()" look="warning" action="#{produtoMB.alterarLinha(linha)}" immediate="true" icon="edit" >
                                        <f:ajax event="click" render="pMCadLinha"/>
                                    </b:commandButton>
                                    <b:commandButton type="button" look="danger" action="#{produtoMB.excluirLinha(linha)}" immediate="true" icon="trash" />
                                </b:dataTableColumn>


                            </b:dataTable>
                        </h:form>

                    </b:panel>


                    <b:panel id="pGrupo" title="Cadastro de Grupo" collapsed="true">
                        <b:button look="primary" onclick="$('.mCadGrupo').modal()" value="Novo Grupo" icon-awesome="plus"/>
                        <b:modal id="mCadGrupo"
                                 title="Cadastro de Grupo de Produtos" 
                                 styleClass="mCadGrupo"
                                 closable="false"  
                                 close-on-escape="false" 
                                 backdrop="false">
                            <b:panel id="pMCadGrupo">
                                <h:form>
                                    <b:row>
                                        <b:inputText span="12" id="descricaoGrupo" value="#{produtoMB.grupo.descricao}" label="Descrição" size="200" required="true" />
                                    </b:row>
                                    <b:row>
                                        <b:inputText span="12" id="nomeGrupo" value="#{produtoMB.grupo.nome}" label="Nome" size="200" required="true" />
                                    </b:row>
                                    <b:row>
                                        <b:inputText span="12" id="nomeRedGrupo" value="#{produtoMB.grupo.nomeReduzido}" label="Nome Reduzido" size="200" required="true" />
                                    </b:row>
                                    <b:row>
                                        <b:message for="descricaoGrupo"/>
                                        <b:message for="nomeGrupo"/>
                                        <b:message for="nomeRedGrupo"/>
                                    </b:row>
                                    <b:commandButton look="primary" value="Salvar" action="#{produtoMB.salvarFamilia()}"  icon-awesome="save">
                                    </b:commandButton>
                                </h:form>
                            </b:panel>
                            <f:facet name="footer">
                                <b:button value="Fechar" look="danger" dismiss="modal" />
                            </f:facet>
                        </b:modal>

                        <b:modal id="mDtGrupo"
                                 title="Cadastro de Grupo de Produtos" 
                                 styleClass="mDtGrupo"
                                 closable="false"  
                                 close-on-escape="false" 
                                 backdrop="false">
                            <b:panel id="pMDtGrupo">
                                <h:form>
                                    <b:row>
                                        <b:inputText readonly="true" span="12" id="descricaoGrupo" value="#{produtoMB.grupo.descricao}" label="Descrição" size="200" required="true" />
                                    </b:row>
                                    <b:row>
                                        <b:inputText readonly="true" span="12" id="nomeGrupo" value="#{produtoMB.grupo.nome}" label="Nome" size="200" required="true" />
                                    </b:row>
                                    <b:row>
                                        <b:inputText readonly="true" span="12" id="nomeRedGrupo" value="#{produtoMB.grupo.nomeReduzido}" label="Nome Reduzido" size="200" required="true" />
                                    </b:row>
                                </h:form>
                            </b:panel>
                            <f:facet name="footer">
                                <b:button value="Fechar" look="danger" dismiss="modal" />
                            </f:facet>
                        </b:modal>

                        <h:form>
                            <b:dataTable  excel="true"
                                          columnVisibility="true"
                                          print="true"
                                          value="#{produtoMB.grupos}"
                                          var="grupo"
                                          select="true"
                                          selectionMode="single"
                                          customLangUrl="//cdn.datatables.net/plug-ins/1.10.12/i18n/Portuguese-Brasil.json"
                                          >

                                <b:dataTableColumn value="#{grupo.nome}" label="Grupo" />
                                <b:dataTableColumn value="#{grupo.descricao}" label="Descrição" />
                                <b:dataTableColumn value="#{grupo.nomeReduzido}" label="Nome Reduzido" />

                                <b:dataTableColumn label="Ver">
                                    <b:commandButton type="button" onclick="$('.mDtGrupo').modal()" look="info" action="#{produtoMB.detalharGrupo(grupo)}" immediate="true" icon-awesome="search-plus">
                                        <f:ajax event="click" render="pMDtGrupo"/>
                                    </b:commandButton>
                                    <b:commandButton type="button" onclick="$('.mCadGrupo').modal()" look="warning" action="#{produtoMB.alterarGrupo(grupo)}" immediate="true" icon="edit">
                                        <f:ajax event="click" render="pMCadGrupo"/>
                                    </b:commandButton>
                                    <b:commandButton type="button" look="danger" action="#{produtoMB.excluirGrupo(grupo)}" immediate="true" icon="trash" />
                                </b:dataTableColumn>
                            </b:dataTable>
                        </h:form>
                    </b:panel>
                </b:formGroup>
        </ui:define>
    </ui:composition>
</html>
